[["data-products-1.html", "Chapter 8 Data products 8.1 Introduction 8.2 A first taste of Quarto 8.3 Dynamic products 8.4 {targets} and Quarto", " Chapter 8 Data products What you’ll have learned by the end of the chapter: you’ll know how to build data products using Quarto and Shiny. 8.1 Introduction We are going to start by building data products using Quarto. Quarto is a tool created by Posit, the company behind RStudio and Shiny. Quarto leverages pandoc to convert between many document formats (for example, from .md to .docx) and makes it possible to embed R, Python, Julia and Observable JS code into documents. It is not an R-specific tool, so it is a program that you must install on your computer. So go to this link and download and install Quarto. We are going to start simple, with “static” data products. By static I mean products without any sort of interactivity, so the user can look at them, read them, but not change them in any way. These products are essentially going to be documents in the .docx, .pptx and .pdf formats, but also .html. Thanks to Quarto, it is thus possible to programmatically create documents. 8.2 A first taste of Quarto A Quarto file looks very close to a standard Markdown file. So if you know Markdown, you will not have many problems to switch to Quarto. If you don’t know Markdown, no worries, its syntax is quite simple and can be very quickly picked up. Let’s start with a basic Quarto source. Open your favorite text editor (doesn’t have to be RStudio) and create a file called example.qmd and copy the following lines in it: --- title: &quot;My Title&quot; author: &quot;My name&quot; date: today --- ## This is a simple quarto document ```{r} n &lt;- 10 rnorm(n) ``` This is the output. The first few lines of the document is where you can define the title of the document, the name of the author and the date. For the date, I’ve use the today keyword to get today’s date but you could use a string to set the date to a specific day (for example, “2022-10-28”). The content in the document consists of a level 2 title (## This is a simple quarto document) and of an R code chunk. Code chunks is were you will write code that gets then evaluated at render (compile) time. To compile this file, run the following inside a terminal: ➤ quarto render example.qmd If you’re inside RStudio, you can also render the document by pressing CTRL-SHIFT-K or run the command: quarto::quarto_render(&quot;example.qmd&quot;) There are various ways to integrate Quarto with different editors: VS Code RStudio Jupyter (Neo)Vim, Emacs, Sublime Once the file is done rendering, you should find an html file in the same folder. Open this html file inside a web browser and see the output. It is possible to run arbitrary R code inside the code chunks: --- title: &quot;My Title&quot; author: &quot;My name&quot; date: today --- ## This is a simple quarto document ```{r} library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;, place_name %in% c(&quot;Luxembourg&quot;, &quot;Esch-sur-Alzette&quot;, &quot;Wiltz&quot;)) %&gt;% group_by(place_name) %&gt;% nest() %&gt;% mutate(plots = map2(.x = data, .y = place_name, ~ggplot(data = .x) + theme_minimal() + geom_line(aes(year, unemployment_rate_in_percent, group = 1)) + labs(title = paste(&quot;Unemployment in&quot;, .y)))) %&gt;% pull(plots) ``` This is what the output looks like. As you can see, it is quite easy to create a document with potentially hundreds of plots using what we’ve learned until now. However, our document does not look great; for starters, we see the source code there, which we would like to hide. People that will read this document might not be interested in the source code, but only in the plots. The other issue is that when loading the {dplyr} package, users get some message informing them about some functions that get masked. We would like to hide all of this. It turns out that code chunks have options, and we can use them to hide source code and warning messages: --- title: &quot;My Title&quot; author: &quot;My name&quot; date: today --- ## This is a simple quarto document ```{r} #| echo: false #| warning: false library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;, place_name %in% c(&quot;Luxembourg&quot;, &quot;Esch-sur-Alzette&quot;, &quot;Wiltz&quot;)) %&gt;% group_by(place_name) %&gt;% nest() %&gt;% mutate(plots = map2(.x = data, .y = place_name, ~ggplot(data = .x) + theme_minimal() + geom_line(aes(year, unemployment_rate_in_percent, group = 1)) + labs(title = paste(&quot;Unemployment in&quot;, .y)))) %&gt;% pull(plots) ``` This is what the output looks like. Rendering this document will result in something nicer. We could also fold the code instead of completely removing it. This is useful if we need to send the document to collaborators who might be interested in the source code as well. However, code folding is something that only works in html outputs, and thus we need to specify the output format in the header of the document (look at the three new lines after we define the data), and also remove the echo: false option from the R chunk: --- title: &quot;My Title&quot; author: &quot;My name&quot; date: today format: html: code-fold: true --- ## This is a simple quarto document ```{r} #| warning: false library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;, place_name %in% c(&quot;Luxembourg&quot;, &quot;Esch-sur-Alzette&quot;, &quot;Wiltz&quot;)) %&gt;% group_by(place_name) %&gt;% nest() %&gt;% mutate(plots = map2(.x = data, .y = place_name, ~ggplot(data = .x) + theme_minimal() + geom_line(aes(year, unemployment_rate_in_percent, group = 1)) + labs(title = paste(&quot;Unemployment in&quot;, .y)))) %&gt;% pull(plots) ``` This is what the output looks like. It is of course possible to write several R chunks: --- title: &quot;My Title&quot; author: &quot;My name&quot; date: today format: html: code-fold: true --- ## This is a simple quarto document ```{r} #| warning: false library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp &lt;- unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;) ``` There are `r length(unique(unemp$place_name))` communes in the dataset. Below we plot the unemployment rate for 3 communes: ```{r} unemp %&gt;% filter(place_name %in% c(&quot;Luxembourg&quot;, &quot;Esch-sur-Alzette&quot;, &quot;Wiltz&quot;)) %&gt;% group_by(place_name) %&gt;% nest() %&gt;% mutate(plots = map2(.x = data, .y = place_name, ~ggplot(data = .x) + theme_minimal() + geom_line(aes(year, unemployment_rate_in_percent, group = 1)) + labs(title = paste(&quot;Unemployment in&quot;, .y)))) %&gt;% pull(plots) ``` This is what the output looks like. 8.2.1 Python and Julia code chunks It is possible, inside the same Quarto document, to define code chunks that run Python (or even Julia) code. Put the following lines inside a file called example2.qmd (to run the example below, you will need to have Python installed): --- title: &quot;R and Python&quot; author: &quot;Bruno Rodrigues&quot; date: today --- ## This is a simple quarto document ```{r} #| warning: false library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp &lt;- unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;) ``` ```{python} print(&quot;hello from Python&quot;) import sys print(sys.version) ``` This is what the output looks like. If you have trouble rendering this line, make sure that you have the jupyter and jupyterlab modules installed. It is also possible to pass objects from R to Python (and vice-versa): --- title: &quot;R and Python&quot; author: &quot;Bruno Rodrigues&quot; date: today --- ## This is a simple quarto document ```{r} #| warning: false library(dplyr) library(tidyr) library(purrr) library(ggplot2) library(myPackage) data(&quot;unemp&quot;) unemp &lt;- unemp %&gt;% janitor::clean_names() %&gt;% filter(level == &quot;Commune&quot;) ``` The data that was loaded and cleaned from R can be accessed from Python using `r.unemp`: ```{python} import pandas as pd unemp_pd = pd.DataFrame(r.unemp) unemp_pd.head ``` This is what the output looks like. 8.2.2 Other output formats 8.2.2.1 Word 8.3 Dynamic products 8.3.1 HTML documents redux 8.3.2 Interactive web applications 8.4 {targets} and Quarto "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
